# é›¨å¤©æ°” Flutter

ä¸€æ¬¾ç°ä»£åŒ–çš„å¤©æ°”é¢„æŠ¥åº”ç”¨ï¼Œé‡‡ç”¨ Flutter å¼€å‘ï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒå’Œç²¾ç¾çš„ç•Œé¢è®¾è®¡ã€‚

> **English Documentation**: [README_EN.md](README_EN.md) | **ä¸­æ–‡æ–‡æ¡£**: æœ¬æ–‡ä»¶

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸŒ¤ï¸ **å®æ—¶å¤©æ°”æ•°æ®**ï¼šä» weatherol.cn API è·å–å‡†ç¡®çš„å¤©æ°”ä¿¡æ¯
- ğŸ“ **æ™ºèƒ½å®šä½**ï¼šGPS è‡ªåŠ¨å®šä½å’Œ IP å®šä½åŒé‡ä¿éšœ
- ğŸ“Š **å¤šç»´åº¦é¢„æŠ¥**ï¼š24å°æ—¶é€æ—¶é¢„æŠ¥ + 15å¤©æ¯æ—¥é¢„æŠ¥
- ğŸ“ˆ **äº¤äº’å¼å›¾è¡¨**ï¼šæ¸©åº¦è¶‹åŠ¿å¯è§†åŒ–å±•ç¤º
- ğŸŒ«ï¸ **ç©ºæ°”è´¨é‡**ï¼šå®æ—¶ AQI æŒ‡æ•°å’Œç­‰çº§æ˜¾ç¤º
- ğŸ™ï¸ **åŸå¸‚ç®¡ç†**ï¼šå¿«é€Ÿè®¿é—®å’Œç®¡ç†å¤šä¸ªåŸå¸‚

### ğŸ¨ ä¸»é¢˜ç³»ç»Ÿï¼ˆæ–°åŠŸèƒ½ï¼‰
- **ä¸‰ç§ä¸»é¢˜æ¨¡å¼**ï¼šäº®è‰²ã€æš—è‰²ã€è·Ÿéšç³»ç»Ÿ
- **å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡**ï¼š300ms ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»ï¼Œä½¿ç”¨ Curves.easeInOut æ›²çº¿
- **ä¸»é¢˜æ‰©å±•ç³»ç»Ÿ**ï¼šåŸºäº Flutter ThemeExtension çš„ç°ä»£åŒ–ä¸»é¢˜æ¶æ„
- **è‡ªåŠ¨é€‚é…**ï¼šæ‰€æœ‰ UI ç»„ä»¶è‡ªåŠ¨é€‚åº”ä¸»é¢˜å˜åŒ–
- **é¢œè‰²æ’å€¼**ï¼šä¸»é¢˜åˆ‡æ¢æ—¶æ‰€æœ‰é¢œè‰²å¹³æ»‘è¿‡æ¸¡

### UI/UX ç‰¹æ€§
- ğŸ¯ **ç°ä»£åŒ–è®¾è®¡**ï¼šMaterial Design 3 è®¾è®¡è¯­è¨€
- ğŸ“± **å“åº”å¼å¸ƒå±€**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- ğŸ”„ **ä¸‹æ‹‰åˆ·æ–°**ï¼šæµç•…çš„åˆ·æ–°äº¤äº’ä½“éªŒ
- ğŸ­ **åŠ¨æ€èƒŒæ™¯**ï¼šåŸºäºä¸»é¢˜çš„æ¸å˜èƒŒæ™¯
- âš¡ **æµç•…åŠ¨ç”»**ï¼šç²¾å¿ƒè®¾è®¡çš„åŠ è½½å’Œè¿‡æ¸¡åŠ¨ç”»
- ğŸŒ¡ï¸ **æ¸©åº¦å›¾è¡¨**ï¼šç›´è§‚çš„æ¸©åº¦è¶‹åŠ¿å±•ç¤º

### æŠ€æœ¯ç‰¹æ€§
- ğŸ”¥ **çŠ¶æ€ç®¡ç†**ï¼šProvider æ¨¡å¼å®ç°å“åº”å¼ UI
- ğŸ’¾ **æœ¬åœ°ç¼“å­˜**ï¼šSQLite æ•°æ®åº“ç¦»çº¿æ•°æ®å­˜å‚¨
- ğŸ” **æƒé™ç®¡ç†**ï¼šå®Œå–„çš„æƒé™è¯·æ±‚å’Œå¤„ç†æœºåˆ¶
- ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå…¨é¢çš„é”™è¯¯å¤„ç†å’Œå‹å¥½æç¤º
- ğŸ“¦ **JSON åºåˆ—åŒ–**ï¼šè‡ªåŠ¨æ¨¡å‹åºåˆ—åŒ–/ååºåˆ—åŒ–
- ğŸ¨ **ä¸»é¢˜æ‰©å±•**ï¼šå¯æ‰©å±•çš„è‡ªå®šä¹‰ä¸»é¢˜ç³»ç»Ÿ

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ constants/          # åº”ç”¨å¸¸é‡å’Œé…ç½®
â”‚   â”œâ”€â”€ app_colors.dart          # é¢œè‰²å¸¸é‡ï¼ˆå…¼å®¹å±‚ï¼‰
â”‚   â”œâ”€â”€ theme_extensions.dart   # ä¸»é¢˜æ‰©å±•å®šä¹‰
â”‚   â””â”€â”€ app_constants.dart       # åº”ç”¨å¸¸é‡
â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ weather_model.dart       # å¤©æ°”æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ location_model.dart      # ä½ç½®æ•°æ®æ¨¡å‹
â”œâ”€â”€ providers/         # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ weather_provider.dart    # å¤©æ°”æ•°æ®çŠ¶æ€
â”‚   â””â”€â”€ theme_provider.dart      # ä¸»é¢˜çŠ¶æ€ç®¡ç†
â”œâ”€â”€ screens/           # ä¸»è¦é¡µé¢
â”‚   â”œâ”€â”€ today_screen.dart        # ä»Šæ—¥å¤©æ°”é¡µé¢
â”‚   â”œâ”€â”€ hourly_screen.dart       # 24å°æ—¶é¢„æŠ¥é¡µé¢
â”‚   â”œâ”€â”€ forecast15d_screen.dart  # 15æ—¥é¢„æŠ¥é¡µé¢
â”‚   â”œâ”€â”€ city_weather_screen.dart # åŸå¸‚å¤©æ°”é¡µé¢
â”‚   â””â”€â”€ main_cities_screen.dart  # ä¸»è¦åŸå¸‚é¡µé¢
â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘å’Œ API
â”‚   â”œâ”€â”€ weather_service.dart     # å¤©æ°” API æœåŠ¡
â”‚   â”œâ”€â”€ location_service.dart    # å®šä½æœåŠ¡
â”‚   â”œâ”€â”€ database_service.dart    # æ•°æ®åº“æœåŠ¡
â”‚   â””â”€â”€ city_service.dart        # åŸå¸‚æ•°æ®æœåŠ¡
â””â”€â”€ widgets/           # å¯é‡ç”¨ç»„ä»¶
    â”œâ”€â”€ weather_chart.dart       # 7æ—¥æ¸©åº¦å›¾è¡¨
    â”œâ”€â”€ hourly_chart.dart        # 24å°æ—¶æ¸©åº¦å›¾è¡¨
    â”œâ”€â”€ forecast15d_chart.dart   # 15æ—¥æ¸©åº¦å›¾è¡¨
    â”œâ”€â”€ hourly_weather_widget.dart  # 24å°æ—¶é¢„æŠ¥å¡ç‰‡
    â”œâ”€â”€ life_index_widget.dart   # ç”Ÿæ´»æŒ‡æ•°ç»„ä»¶
    â””â”€â”€ sun_moon_widget.dart     # æ—¥å‡ºæ—¥è½æœˆç›¸ç»„ä»¶
```

## ğŸ“¦ æ ¸å¿ƒä¾èµ–

### çŠ¶æ€ç®¡ç†
- **provider** ^6.1.2 - çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆ

### ç½‘ç»œè¯·æ±‚
- **dio** ^5.7.0 - HTTP å®¢æˆ·ç«¯
- **http** ^1.2.2 - HTTP è¯·æ±‚

### å®šä½æœåŠ¡
- **geolocator** ^14.0.2 - GPS å®šä½
- **permission_handler** ^12.0.1 - æƒé™ç®¡ç†

### æœ¬åœ°å­˜å‚¨
- **sqflite** ^2.3.3+1 - æœ¬åœ°æ•°æ®åº“
- **shared_preferences** ^2.3.2 - é”®å€¼å­˜å‚¨

### UI ç»„ä»¶
- **fl_chart** ^0.69.2 - å›¾è¡¨ç»„ä»¶
- **cached_network_image** ^3.4.1 - å›¾ç‰‡ç¼“å­˜
- **lottie** ^3.1.2 - åŠ¨ç”»æ”¯æŒ

### å¼€å‘å·¥å…·
- **json_serializable** ^6.9.1 - JSON åºåˆ—åŒ–
- **build_runner** ^2.4.13 - ä»£ç ç”Ÿæˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Flutter SDK 3.9.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- Dart SDK 3.9.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- Android Studio / VS Code
- Android è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ï¼ˆiOS ä¹Ÿæ”¯æŒï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone <repository-url>
   cd rainweather_flutter
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   flutter pub get
   ```

3. **ç”Ÿæˆä»£ç **ï¼ˆå¦‚éœ€è¦ï¼‰
   ```bash
   flutter pub run build_runner build --delete-conflicting-outputs
   ```

4. **è¿è¡Œåº”ç”¨**
   ```bash
   flutter run
   ```

### æ„å»ºå‘å¸ƒç‰ˆæœ¬

```bash
# Android APK
flutter build apk --release

# Android App Bundle
flutter build appbundle --release

# iOS
flutter build ios --release
```

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿä½¿ç”¨

### ä¸‰ç§ä½¿ç”¨æ–¹å¼

**æ–¹å¼ 1ï¼šæ¨è - ä½¿ç”¨æ‰©å±•æ–¹æ³•**
```dart
Text(
  'ç¤ºä¾‹æ–‡æœ¬',
  style: TextStyle(
    color: context.appTheme.textPrimary,
    fontSize: 16,
  ),
)
```

**æ–¹å¼ 2ï¼šé™æ€æ–¹æ³•**
```dart
Text(
  'ç¤ºä¾‹æ–‡æœ¬',
  style: TextStyle(
    color: AppColors.of(context).textPrimary,
    fontSize: 16,
  ),
)
```

**æ–¹å¼ 3ï¼šå…¼å®¹æ–¹å¼ï¼ˆæ—§ä»£ç ï¼‰**
```dart
Consumer<ThemeProvider>(
  builder: (context, themeProvider, child) {
    AppColors.setThemeProvider(themeProvider);
    return Text(
      'ç¤ºä¾‹æ–‡æœ¬',
      style: TextStyle(color: AppColors.textPrimary),
    );
  },
)
```

è¯¦ç»†ä½¿ç”¨æŒ‡å—è¯·æŸ¥çœ‹ [THEME_USAGE.md](THEME_USAGE.md)

## ğŸ“± ä¸»è¦é¡µé¢

### ä»Šæ—¥å¤©æ°”
- âœ… å½“å‰å¤©æ°”è¯¦ç»†ä¿¡æ¯å±•ç¤º
- âœ… æ¸©åº¦ã€æ¹¿åº¦ã€é£åŠ›ã€æ°”å‹ç­‰æ•°æ®
- âœ… ç©ºæ°”è´¨é‡æŒ‡æ•°ï¼ˆAQIï¼‰
- âœ… æ—¥å‡ºæ—¥è½æ—¶é—´å’Œæœˆç›¸
- âœ… ç”Ÿæ´»æŒ‡æ•°å»ºè®®
- âœ… 24å°æ—¶å¤©æ°”é¢„è§ˆ
- âœ… 7æ—¥æ¸©åº¦è¶‹åŠ¿å›¾è¡¨
- âœ… åº•éƒ¨åˆ·æ–°æŒ‰é’®

### 24å°æ—¶é¢„æŠ¥
- âœ… é€å°æ—¶å¤©æ°”å˜åŒ–
- âœ… æ¸©åº¦è¶‹åŠ¿äº¤äº’å¼å›¾è¡¨
- âœ… å¤©æ°”å›¾æ ‡å’Œæè¿°
- âœ… é£åŠ›é£å‘è¯¦ç»†ä¿¡æ¯
- âœ… æ¸©åº¦å•ä½æ˜¾ç¤ºï¼ˆâ„ƒï¼‰

### 15æ—¥é¢„æŠ¥
- âœ… 15å¤©è¯¦ç»†å¤©æ°”é¢„æŠ¥
- âœ… æœ€é«˜/æœ€ä½æ¸©åº¦è¶‹åŠ¿å›¾
- âœ… ä¸Šåˆ/ä¸‹åˆå¤©æ°”å¯¹æ¯”
- âœ… æ—¥å‡ºæ—¥è½æ—¶é—´
- âœ… å¤©æ°”æè¿°

### ä¸»è¦åŸå¸‚
- âœ… ä¸­å›½ä¸»è¦åŸå¸‚å¤©æ°”å¿«é€ŸæŸ¥çœ‹
- âœ… åŸå¸‚å¤©æ°”å¡ç‰‡å±•ç¤º
- âœ… ç‚¹å‡»æŸ¥çœ‹åŸå¸‚è¯¦ç»†å¤©æ°”
- âœ… æ”¯æŒå¤šä¸ªåŸå¸‚ç®¡ç†

### åŸå¸‚å¤©æ°”è¯¦æƒ…
- âœ… å•ä¸ªåŸå¸‚å®Œæ•´å¤©æ°”ä¿¡æ¯
- âœ… è¿”å›æŒ‰é’®å¯¼èˆª
- âœ… ä¸ä»Šæ—¥å¤©æ°”ç›¸åŒçš„è¯¦ç»†ä¿¡æ¯
- âœ… ä¸‹æ‹‰åˆ·æ–°æ”¯æŒ

## ğŸ”§ æœ€è¿‘æ›´æ–°

### v1.0.0 (2025-10)

**ä¸»é¢˜ç³»ç»Ÿé‡æ„**
- âœ¨ æ–°å¢ä¸‰ç§ä¸»é¢˜æ¨¡å¼ï¼ˆäº®è‰²/æš—è‰²/è·Ÿéšç³»ç»Ÿï¼‰
- âœ¨ å®ç°ä¸»é¢˜åˆ‡æ¢å¹³æ»‘åŠ¨ç”»ï¼ˆ300msï¼‰
- âœ¨ å¼•å…¥ ThemeExtension ç°ä»£åŒ–ä¸»é¢˜æ¶æ„
- âœ¨ æ‰€æœ‰ UI ç»„ä»¶æ”¯æŒä¸»é¢˜è‡ªåŠ¨é€‚é…

**UI/UX ä¼˜åŒ–**
- ğŸ¨ ç»Ÿä¸€ä»Šæ—¥å¤©æ°”å’ŒåŸå¸‚å¤©æ°”çš„å¤´éƒ¨æ ·å¼
- ğŸ¨ ä¼˜åŒ– 24å°æ—¶é¢„æŠ¥åŒºåŸŸé—´è·ï¼ˆå‡å°‘è‡³ 1/3ï¼‰
- ğŸ¨ 24å°æ—¶é¢„æŠ¥æ·»åŠ å¤©æ°”æè¿°æ–‡å­—
- ğŸ¨ ç§»é™¤ 24å°æ—¶é¡µé¢åˆ·æ–°æŒ‰é’®
- ğŸ¨ ç§»é™¤åŸå¸‚å¤©æ°”é¡µé¢çš„ç”Ÿæ´»å»ºè®®å’Œåˆ·æ–°æŒ‰é’®
- ğŸ¨ ä»Šæ—¥å¤©æ°”åˆ·æ–°æŒ‰é’®ç§»è‡³å³ä¸‹è§’

**æ•°æ®å±•ç¤ºä¼˜åŒ–**
- ğŸ“Š æ‰€æœ‰å›¾è¡¨ Y è½´æ¸©åº¦å•ä½æ”¹ä¸º â„ƒ
- ğŸ“Š å›¾è¡¨ç‚¹æè¾¹é¢œè‰²é€‚é…ä¸»é¢˜
- ğŸ“Š ç”Ÿæ´»æŒ‡æ•°å¡ç‰‡æ–‡å­—é¢œè‰²é€‚é…ä¸»é¢˜

**æŠ€æœ¯æ”¹è¿›**
- âš¡ ä¼˜åŒ–ä¸»é¢˜åˆ‡æ¢æ€§èƒ½
- ğŸ”§ æ·»åŠ ä¸»é¢˜ä½¿ç”¨æ–‡æ¡£ï¼ˆTHEME_USAGE.mdï¼‰
- ğŸ›¡ï¸ æ”¹è¿›é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
- ğŸ“¦ ä»£ç ç»“æ„ä¼˜åŒ–å’Œæ¸…ç†

## ğŸ“¡ API é›†æˆ

### å¤©æ°” API
- **åŸºç¡€ URL**: `https://www.weatherol.cn/api/home/`
- **ä¸»è¦ç«¯ç‚¹**: `/getCurrAnd15dAnd24h?cityid={cityId}`
- **æ•°æ®æ ¼å¼**: JSON

### å“åº”æ•°æ®ç»“æ„
```json
{
  "current": {
    "current": {},      // å½“å‰å¤©æ°”
    "tips": ""          // å¤©æ°”æç¤º
  },
  "forecast24h": [],    // 24å°æ—¶é¢„æŠ¥
  "forecast15d": [],    // 15æ—¥é¢„æŠ¥
  "sunMoonData": {},    // æ—¥å‡ºæ—¥è½æœˆç›¸
  "lifeIndex": []       // ç”Ÿæ´»æŒ‡æ•°
}
```

## ğŸ” æƒé™è¯´æ˜

### Android æƒé™
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />
```

### iOS æƒé™
åœ¨ `Info.plist` ä¸­é…ç½®ï¼š
- NSLocationWhenInUseUsageDescription
- NSLocationAlwaysUsageDescription

## ğŸ§ª å¼€å‘æŒ‡å—

### ä»£ç ç”Ÿæˆ
```bash
# ç”Ÿæˆ JSON åºåˆ—åŒ–ä»£ç 
flutter pub run build_runner build --delete-conflicting-outputs

# ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨ç”Ÿæˆ
flutter pub run build_runner watch
```

### ä»£ç åˆ†æ
```bash
# åˆ†ææ‰€æœ‰ä»£ç 
flutter analyze

# åˆ†æç‰¹å®šæ–‡ä»¶
flutter analyze lib/screens/today_screen.dart
```

### æµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
flutter test

# è¿è¡Œç‰¹å®šæµ‹è¯•
flutter test test/widget_test.dart
```

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### çŠ¶æ€ç®¡ç†
```
WeatherProvider (é¡¶å±‚)
  â”œâ”€â”€ currentWeather: WeatherModel?
  â”œâ”€â”€ currentLocation: LocationModel?
  â”œâ”€â”€ isLoading: bool
  â””â”€â”€ error: String?

ThemeProvider (é¡¶å±‚)
  â”œâ”€â”€ themeMode: AppThemeMode
  â””â”€â”€ notifyListeners()
```

### æ•°æ®æµ
```
å®šä½æœåŠ¡ â†’ WeatherProvider â†’ å¤©æ°”æœåŠ¡ â†’ API
                â†“
         æ•°æ®åº“ç¼“å­˜ â† â† â† â† â† â† â†
                â†“
              UI æ›´æ–°
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª Dart å®˜æ–¹ä»£ç é£æ ¼
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š
- ä¿æŒä»£ç æ•´æ´å’Œå¯è¯»æ€§

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [weatherol.cn](https://www.weatherol.cn) - æä¾›å¤©æ°”æ•°æ® API
- [Flutter](https://flutter.dev) - ä¼˜ç§€çš„è·¨å¹³å°æ¡†æ¶
- [Provider](https://pub.dev/packages/provider) - çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆ
- [FL Chart](https://pub.dev/packages/fl_chart) - å›¾è¡¨ç»„ä»¶åº“
- æ‰€æœ‰å¼€æºè´¡çŒ®è€…

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿ï¼š
- æäº¤ Issue
- å‘èµ· Discussion
- æäº¤ Pull Request

---

**Made with â¤ï¸ using Flutter**
